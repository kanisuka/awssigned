---
title: "실시간 이미지 썸네일 생성"
weight: 42
pre: "<b>4-2-2 </b>"

---

{{% notice info %}}
본 실습은 Virginia (us-east-1) 리전에서 Cloud9 IDE 툴을 사용하여 진행합니다.
{{% /notice %}}

## 실시간 이미지 썸네일 vs 원본 이미지 파일 업로드 시, 썸네일 생성
기존 원본 이미지 파일을 업로드 시, 람다 함수를 통해 이벤트 방식으로 썸네일을 생성하는 경우에는 업로드된 원본 이미지 파일에 대한 썸네일이 필요하지 않을 경우에도 생성이 되며, 생성된 파일은 모두 S3에 저장이 됩니다. 더욱이 이벤트 방식으로 생성이 되기 때문에, 사용자 썸네일 요청이 미처 썸네일이 생성되기도 전에 호출이 된다면 사용자에게 제대로 된 썸네일을 내려줄 수 없는 이슈가 존재합니다.

본 실습은 사용자가 썸네일 요청을 할 때, 실시간으로 이미지 썸네일을 생성하고, 생성된 썸네일을 사용자에게 전달하는 방식으로 실습을 진행합니다. 생성된 썸네일은 S3에 저장되는 게 아니라, CloudFront에 캐싱되도록 만들어서 S3 비용도 절약하면서 동시에 CloudFront 캐싱을 통한 응답 속도를 개선합니다.

## Lambda@Edge 함수 고려해야할 점
Lambda@Edge 함수를 만들어서 특정 CloudFront에 배포할 경우, 아래와 같은 부분은 고려해야 합니다.
- 응답의 Body를 저작할 경우, 크기는 1MB를 넘어갈 수 없습니다.
- Node.js만 사용이 가능합니다.
- Virginia (us-east-1) 리전에서만 배포가 가능합니다.
